/* ========================================= */
/* I. å…¨åŸŸèˆ‡åŸºç¤Žè¨­å®š */
/* ========================================= */

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f4f7f9; /* æ·ºç°è‰²èƒŒæ™¯ */
    color: #333;
    margin: 0;
    padding: 0;
    line-height: 1.6;
}

header {
    background-color: #007bff; /* å“ç‰Œè—è‰² */
    color: white;
    padding: 20px 0;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

header h1 {
    margin: 0;
    font-size: 1.8em;
}

/* ========================================= */
/* II. ä½ˆå±€çµæ§‹ */
/* ========================================= */

.container {
    display: grid;
    grid-template-columns: 2fr 1fr; /* å½±åƒä½” 2/3, æŽ§åˆ¶ä½” 1/3 */
    gap: 20px;
    max-width: 1200px;
    margin: 20px auto;
    padding: 0 20px;
}

/* å¡ç‰‡æ¨£å¼ (ç”¨æ–¼å€å¡Šåˆ†éš”) */
.card {
    background-color: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    margin-bottom: 20px;
}

.x_y_position{
    display: grid;
    grid-template-columns: 1fr 1fr 1fr 1fr;
    text-align: center;
}

.card h2 {
    color: #007bff;
    margin-top: 0;
    padding-bottom: 10px;
    border-bottom: 2px solid #e9ecef;
    font-size: 1.4em;
}

/* å·¦å´å€å¡Šï¼šå½±åƒå’Œæ©Ÿå°ç‹€æ…‹ */
.video-feed-section {
    grid-column: 1 / 2;
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.video-card {
    flex-grow: 1; /* è®“å½±åƒå¡ç‰‡ä½”æ“šå‰©é¤˜ç©ºé–“ */
}

/* å³å´å€å¡Šï¼šæŽ§åˆ¶é¢æ¿ */
.control-panel-section {
    grid-column: 2 / 3;
}


/* ========================================= */
/* III. å…ƒç´ æ¨£å¼ (å½±åƒèˆ‡æŽ§åˆ¶) */
/* ========================================= */

.image-display-wrapper {
    text-align: center;
    background-color: #000;
    border-radius: 4px;
    margin-top: 15px;
    overflow: hidden;
}

#cam,
#cam_processed {
    display: block;
    width: 100%;
    /* max-height: 500px; */
    object-fit: contain; 
}

.video-controls {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 10px;
}

#image_change {
    padding: 8px 12px;
    border-radius: 4px;
    border: 1px solid #ced4da;
}

/* æŒ‰éˆ•çµ„æ¨£å¼ */
.button-group {
    display: flex; /* ç¢ºä¿æŒ‰éˆ•æ©«å‘æŽ’åˆ— */
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 10px;
}

.grid-2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
}

/* åŸºç¤ŽæŒ‰éˆ•æ¨£å¼ */
.action-btn ,
.action-btn-function ,
.action-draw-btn-function{
    padding: 12px 15px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    transition: background-color 0.2s, transform 0.1s;
    flex-grow: 1; /* é€™æ˜¯è®“æŒ‰éˆ•å¹³å‡åˆ†æ•£ä¸¦å¡«æ»¿å¯¬åº¦çš„é—œéµ */
    min-width: 80px;
}

.action-btn-function {
    background-color: #e0e0e0; /* é è¨­çš„æ·ºç°è‰² */
    color: #333; /* é è¨­çš„æ–‡å­—é¡è‰² */
}

.action-btn:hover ,
.action-btn-function:hover ,
.action-draw-btn-function:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

/* --- æ©Ÿå™¨äººåŠŸèƒ½ --- */
.action-btn-function.active ,
.action-draw-btn-function.active {
    background-color: #007bff; /* é†’ç›®çš„è—è‰²ï¼Œä½œç‚ºä¸»è¦é¡è‰² */
    color: white; /* ç™½è‰²æ–‡å­—ï¼Œèˆ‡è—è‰²èƒŒæ™¯å½¢æˆå°æ¯” */
    box-shadow: 0 4px 8px rgba(0, 123, 255, 0.3); /* å¢žåŠ é¸ä¸­æ™‚çš„é™°å½± */
}
.button-group {
    display: flex;
    gap: 10px; /* æŒ‰éˆ•ä¹‹é–“çš„é–“è· */
    width: 100%; /* ç¢ºä¿å®ƒèƒ½ä½”æ»¿çˆ¶å®¹å™¨ */
    max-width: 600px;
    margin: 20px 0;
}

/* --- ç¹ªåœ–åŠŸèƒ½ --- */
.action-draw-btn-function.active {
    background-color: #007bff; /* é†’ç›®çš„è—è‰²ï¼Œä½œç‚ºä¸»è¦é¡è‰² */
    color: white; /* ç™½è‰²æ–‡å­—ï¼Œèˆ‡è—è‰²èƒŒæ™¯å½¢æˆå°æ¯” */
    box-shadow: 0 4px 8px rgba(0, 123, 255, 0.3); /* å¢žåŠ é¸ä¸­æ™‚çš„é™°å½± */
}


/* é¡è‰²å®šç¾© */
.primary { background-color: #28a745; color: white; }
.primary:hover { background-color: #218838; }

.secondary { background-color: #6c757d; color: white; }
.secondary:hover { background-color: #5a6268; }

.tertiary { background-color: #e9ecef; color: #333; }
.tertiary:hover { background-color: #d8dee3; }

.danger { background-color: #dc3545; color: white; }
.danger:hover { background-color: #c82333; }

/* æ–¹å‘æŽ§åˆ¶ç‰¹åŒ–æŽ’ç‰ˆ (æ¨¡æ“¬æ–¹å‘ç›¤) */
.movement-controls {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 1fr);
    gap: 10px;
    width: 280px;
    margin: 15px auto 0 auto; /* èª¿æ•´ä¸Šé‚Šè· */
}

.movement-controls .up { grid-column: 2 / 3; grid-row: 1 / 2; }
.movement-controls .left { grid-column: 1 / 2; grid-row: 2 / 3; }
.movement-controls .stop { grid-column: 2 / 3; grid-row: 2 / 3; }
.movement-controls .right { grid-column: 3 / 4; grid-row: 2 / 3; }
.movement-controls .down { grid-column: 2 / 3; grid-row: 3 / 4; }

/* è¡¨å–®æ¨£å¼ */
.advanced-control-card form { display: flex; flex-direction: column; gap: 15px; }
.form-group { display: flex; flex-direction: column; }
.form-group label { font-weight: bold; margin-bottom: 5px; color: #495057; }
input[type="number"], select {
    padding: 10px;
    border: 1px solid #ced4da;
    border-radius: 4px;
    width: 100%;
    box-sizing: border-box;
}
.form-actions { display: flex; justify-content: space-between; gap: 10px; margin-top: 10px; }


/* ========================================= */
/* IV. æ–°å¢žå€å¡ŠæŽ’ç‰ˆ */
/* ========================================= */

/* æ©Ÿå°ç‹€æ³å¡ç‰‡ */
.basic-control-card:nth-child(2) {
    flex-shrink: 0;
}

/* æ©Ÿå°æ•¸æ“šåˆ— (Grid ä½ˆå±€) - å„ªåŒ–ç‚ºå…©è¡Œé¡¯ç¤º */
.basic-control-card > div {
    /* ä¿æŒ 8 æ¬„ */
    display: grid;
    grid-template-columns: 1.5fr 1fr 1.2fr 1fr 1.2fr 1fr 1.2fr 1.5fr; /* 8 æ¬„ (6æ¬„æ•¸æ“š + æ©Ÿå°å + æŒ‰éˆ•) */
    grid-template-rows: auto auto; /* å…©è¡Œ */
    
    gap: 8px 15px; /* åž‚ç›´å’Œæ°´å¹³é–“è· */
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid #e9ecef; 
    font-size: 0.95em;
}

.basic-control-card > div:last-child {
    border-bottom: none;
}

/* æ•¸æ“šæ¨™ç±¤å’Œæ•¸å€¼çš„å…±åŒæ¨£å¼ */
.basic-control-card > div p {
    margin: 0;
    padding: 0;
    white-space: nowrap;
}

/* æ¨™ç±¤æ¨£å¼ (é›»é‡, é€Ÿåº¦, è§’é€Ÿåº¦, ä½ç½®... çš„åç¨±) */
.basic-control-card > div p:nth-child(2n) {
    color: #6c757d;
    font-weight: normal;
    text-align: right; 
}

/* æ•¸å€¼æ¨£å¼ (60%, 10m, (1,2) ) */
.basic-control-card > div p:nth-child(2n + 1):not(:first-child) {
    font-weight: bold;
    color: #495057;
    text-align: left;
}


/* æ©Ÿå°åç¨± - åž‚ç›´è·¨è¶Šå…©è¡Œ */
.basic-control-card > div p:nth-child(1) { 
    grid-column: 1 / 2;
    grid-row: 1 / span 2; /* åž‚ç›´è·¨è¶Šå…©è¡Œ */
    font-weight: bold;
    color: #007bff;
    font-size: 1.15em;
    align-self: flex-start; /* è®“æ©Ÿå°åé ä¸Šå°é½Š */
    padding-top: 5px;
}

/* --- ç¬¬ä¸€è¡Œæ•¸æ“š (åŸºæœ¬ç‹€æ…‹) --- */

/* é›»é‡: P2, P3 ä½” G2, G3 */
.basic-control-card > div p:nth-child(2) { grid-column: 2 / 3; grid-row: 1 / 2; }
.basic-control-card > div p:nth-child(3) { grid-column: 3 / 4; grid-row: 1 / 2; color: #28a745; } /* é›»é‡å€¼ç¶ è‰²å¼·èª¿ */

/* é€Ÿåº¦: P4, P5 ä½” G4, G5 */
.basic-control-card > div p:nth-child(4) { grid-column: 4 / 5; grid-row: 1 / 2; }
.basic-control-card > div p:nth-child(5) { grid-column: 5 / 6; grid-row: 1 / 2; }

/* è§’é€Ÿåº¦: P6, P7 ä½” G6, G7 */
.basic-control-card > div p:nth-child(6) { grid-column: 6 / 7; grid-row: 1 / 2; }
.basic-control-card > div p:nth-child(7) { grid-column: 7 / 8; grid-row: 1 / 2; }


/* --- ç¬¬äºŒè¡Œæ•¸æ“š (ä½ç½®è³‡è¨Š & æ–°å¢žçš„è·é›¢) --- */

/* ç•¶å‰ä½ç½®: P8, P9 ä½” G2, G3 */
.basic-control-card > div p:nth-child(8) { 
    grid-column: 2 / 3; 
    grid-row: 2 / 3; 
    color: #007bff; 
    text-align: left; /* ä½ç½®æ¨™ç±¤å¾žå·¦å´é–‹å§‹ï¼Œä¸è·Ÿå‰é¢çš„å³å°é½Š */
}
.basic-control-card > div p:nth-child(9) { grid-column: 3 / 4; grid-row: 2 / 3; } /* ç•¶å‰ä½ç½®å€¼ */

/* ðŸ’¡ åŽŸæœ¬çš„ ç›®æ¨™ä½ç½® (P10, P11) è¢«è¦†è“‹ */

/* ðŸ’¡ æ–°å¢žï¼šç›®æ¨™ä½ç½® (P12) æ¨™ç±¤ */
.basic-control-card > div p:nth-child(10) { 
    grid-column: 4 / 5; 
    grid-row: 2 / 3; 
    color: #007bff; /* ä¿æŒè—è‰² */
    text-align: left;
}
/* ðŸ’¡ æ–°å¢žï¼šç›®æ¨™ä½ç½® (P13) æ•¸å€¼ */
.basic-control-card > div p:nth-child(11) { grid-column: 5 / 6; grid-row: 2 / 3; } 


/* ðŸ’¡ å°‡ P12, P13 (åŽŸæœ¬çš„è·é›¢) é¡è‰²æ›¿æ›æˆ P10, P11 çš„é¡è‰² */
/* è·é›¢ï¼š(P12) æ¨™ç±¤ */
.basic-control-card > div p:nth-child(12) {
    grid-column: 6 / 7; /* ä½¿ç”¨åŽŸæœ¬çµ¦è§’é€Ÿåº¦çš„ä½ç½® */
    grid-row: 2 / 3;
    color: #007bff; /* ä¿æŒè—è‰²æ¨™ç±¤ */
    text-align: left;
}
/* ç„¡è³‡æ–™ (P13) æ•¸å€¼ */
.basic-control-card > div p:nth-child(13) {
    grid-column: 7 / 8; /* ä½¿ç”¨åŽŸæœ¬çµ¦è§’é€Ÿåº¦çš„ä½ç½® */
    grid-row: 2 / 3;
    font-weight: bold;
    color: #dc3545; /* è·é›¢æ•¸å€¼ä½¿ç”¨ç´…è‰²å¼·èª¿ */
    text-align: left;
}


/* --- æ©Ÿå°æ“ä½œæŒ‰éˆ•ç¾¤çµ„æŽ’ç‰ˆ (Start/Stop) --- */
.machine-actions-group {
    grid-column: 8 / 9; /* ä¿æŒä½”æ“šæœ€å¾Œä¸€æ¬„ */
    grid-row: 1 / span 2; /* åž‚ç›´è·¨è¶Šå…©è¡Œ */
    
    display: flex;
    flex-direction: column; /* è®“æŒ‰éˆ•åž‚ç›´å †ç–Š */
    gap: 5px; /* æŒ‰éˆ•ä¹‹é–“çš„é–“è· */
    align-items: stretch; /* è®“æŒ‰éˆ•å¡«æ»¿å®¹å™¨å¯¬åº¦ */
    justify-content: center; /* è®“æŒ‰éˆ•çµ„åž‚ç›´å±…ä¸­ */
}

/* é‡å°æŒ‰éˆ•ç¾¤çµ„å…§çš„æŒ‰éˆ•èª¿æ•´åŸºç¤Žæ¨£å¼ */
.machine-actions-group button {
    padding: 8px 5px; /* ç¨å¾®ç¸®å°å…§é‚Šè·ï¼Œè®“å…©æŒ‰éˆ•éƒ½èƒ½åœ¨å…©è¡Œå…§é¡¯ç¤º */
    font-size: 0.9em;
    font-weight: bold;
    white-space: nowrap;
}

/* åŸºç¤Žæ–¹å‘æŽ§åˆ¶å€å…§çš„é¸å– (Checkbox/Radio) */
.movement-control-card > div:first-of-type {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    padding-bottom: 10px;
    margin-bottom: 15px;
    border-bottom: 1px solid #e9ecef;
}

.movement-control-card label {
    font-weight: normal;
    cursor: pointer;
}

/* ç¢ºä¿ Checkbox/Radio Button å’Œ Label å°é½Š */
.movement-control-card input[type="radio"],
.movement-control-card input[type="checkbox"] {
    margin-right: 5px;
}


/* ========================================= */
/* V. éŸ¿æ‡‰å¼èª¿æ•´ */
/* ========================================= */

@media (max-width: 900px) {
    .container {
        grid-template-columns: 1fr; /* å°èž¢å¹•æ™‚åªä½”ä¸€æ¬„ */
    }
    .video-feed-section, .control-panel-section {
        grid-column: 1 / 2;
    }
    
    /* å°èž¢å¹•æ™‚ï¼Œæ©Ÿå°ç‹€æ…‹æ”¹ç‚ºå–®è¡Œç·Šæ¹Šä½ˆå±€ */
    .basic-control-card > div {
        /* ä¿æŒ 5 æ¬„ */
        grid-template-columns: 1.2fr 1.5fr 1.5fr 2fr 1.5fr; 
        grid-template-rows: auto; /* è®Šå›žå–®è¡Œ */
        font-size: 0.85em;
        gap: 5px 10px;
        padding: 8px 0;
    }

    /* å°‡æ‰€æœ‰å…ƒç´ ç§»è‡³ç¬¬ä¸€è¡Œï¼Œä¸¦å–æ¶ˆåž‚ç›´è·¨è¶Š */
    .basic-control-card > div p,
    .basic-control-card > div .machine-actions-group { 
        grid-row: 1 / 2 !important; /* å¼·åˆ¶æ‰€æœ‰å…ƒç´ å›žåˆ°å–®è¡Œ */
    }

    /* éš±è—è¼ƒä¸é‡è¦çš„æ•¸æ“š */
    .basic-control-card > div p:nth-child(4), /* é€Ÿåº¦æ¨™ç±¤ */
    .basic-control-card > div p:nth-child(6), /* è§’é€Ÿåº¦æ¨™ç±¤ */
    .basic-control-card > div p:nth-child(7), /* è§’é€Ÿåº¦å€¼ */
    .basic-control-card > div p:nth-child(10), /* ç›®æ¨™ä½ç½®æ¨™ç±¤ */
    .basic-control-card > div p:nth-child(11) { /* ç›®æ¨™ä½ç½®å€¼ */
        display: none;
    }
    
    /* é‡æ–°å®šä½ä¿ç•™ä¸‹ä¾†çš„å…ƒç´ ï¼Œä½¿ç”¨æ¨™ç±¤/å€¼ä½”ç”¨å¯¬æ¬„ä½ */
    .basic-control-card > div p:nth-child(1) { grid-column: 1 / 2; } /* æ©Ÿå°åç¨± (1) */
    
    /* é›»é‡: P2(æ¨™ç±¤) P3(å€¼) çµ„åˆä½”ç”¨ç¬¬äºŒæ¬„ */
    .basic-control-card > div p:nth-child(2) { grid-column: 2 / 3; text-align: right; }
    .basic-control-card > div p:nth-child(3) { grid-column: 3 / 4; text-align: left; }
    
    /* é€Ÿåº¦å€¼: P5 ä½”ç”¨ç¬¬å››æ¬„ (P4 æ¨™ç±¤è¢«éš±è—) */
    .basic-control-card > div p:nth-child(5) { grid-column: 3 / 4; text-align: left; }
    
    /* ç•¶å‰ä½ç½®: P8(æ¨™ç±¤) P9(å€¼) çµ„åˆä½”ç”¨ç¬¬äº”æ¬„ */
    .basic-control-card > div p:nth-child(8) { grid-column: 4 / 5; text-align: right; color: #007bff; } 
    .basic-control-card > div p:nth-child(9) { grid-column: 5 / 6; text-align: left; }

    /* ðŸ’¡ æ–°å¢žï¼šè·é›¢ (P12, P13) è¦†è“‹ç›®æ¨™ä½ç½®çš„ä½ç½® */
    .basic-control-card > div p:nth-child(12) { 
        grid-column: 4 / 5; 
        text-align: right; 
        color: #007bff; 
    }
    .basic-control-card > div p:nth-child(13) { 
        grid-column: 5 / 6; 
        text-align: left;
        color: #dc3545; /* è·é›¢æ•¸å€¼ç´…è‰² */
    }

    /* å°‡æŒ‰éˆ•ç¾¤çµ„ç§»å‹•åˆ°æœ€å¾Œä¸€æ¬„ */
    .basic-control-card > div .machine-actions-group { 
        grid-column: 6 / 7;
        font-size: 0.85em;
        padding: 0;
    }
}